openapi: 3.0.3
info:
  title: Überböse Streaming API
  description: Reverse engineered API specification
  version: 1.2.0
paths:
  /streaming/sourceproviders:
    get:
      summary: Get streaming source providers
      description: Retrieves a list of available streaming source providers
      operationId: getSourceProviders
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Successful response with list of source providers
          headers:
            Content-Type:
              schema:
                type: string
                example: application/vnd.bose.streaming-v1.2+xml
            ETag:
              schema:
                type: string
                example: "1762017390476"
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization"
            Access-Control-Expose-Headers:
              schema:
                type: string
                example: "Authorization"
          content:
            application/vnd.bose.streaming-v1.2+xml:
              schema:
                $ref: '#/components/schemas/SourceProvidersResponse'
              example: |
                <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
                <sourceProviders>
                  <sourceprovider id="1">
                    <createdOn>2012-09-19T12:43:00.000+00:00</createdOn>
                    <name>PANDORA</name>
                    <updatedOn>2012-09-19T12:43:00.000+00:00</updatedOn>
                  </sourceprovider>
                  <sourceprovider id="15">
                    <createdOn>2014-03-17T15:30:27.000+00:00</createdOn>
                    <name>SPOTIFY</name>
                    <updatedOn>2014-03-17T15:30:27.000+00:00</updatedOn>
                  </sourceprovider>
                </sourceProviders>
        '401':
          description: Unauthorized - Invalid or missing Bearer token
        '403':
          description: Forbidden - Valid token but insufficient permissions
        '500':
          description: Internal server error

  /streaming/account/{accountId}/device/{deviceId}/recent:
    post:
      summary: Add recent item
      description: Adds a recent item to the device's recent history
      operationId: addRecentItem
      security:
        - BearerAuth: []
      parameters:
        - name: accountId
          in: path
          required: true
          description: Account identifier
          schema:
            type: string
            example: "6921042"
        - name: deviceId
          in: path
          required: true
          description: Device identifier
          schema:
            type: string
            example: "587A628A4042"
      requestBody:
        required: true
        content:
          application/vnd.bose.streaming-v1.2+xml:
            schema:
              $ref: '#/components/schemas/RecentItemRequest'
            example: |
              <?xml version="1.0" encoding="UTF-8" ?>
              <recent>
                <lastplayedat>2025-11-01T17:32:59+00:00</lastplayedat>
                <sourceid>19989313</sourceid>
                <name>Radio TEDDY</name>
                <location>/v1/playback/station/s80044</location>
                <contentItemType>stationurl</contentItemType>
              </recent>
      responses:
        '201':
          description: Recent item created successfully
          headers:
            Content-Type:
              schema:
                type: string
                example: application/vnd.bose.streaming-v1.2+xml
            Location:
              schema:
                type: string
                example: http://streamingqa.bose.com/account/6921042/device/587A628A4042/recent/2244536342
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization"
            Access-Control-Expose-Headers:
              schema:
                type: string
                example: "Credentials"
          content:
            application/vnd.bose.streaming-v1.2+xml:
              schema:
                $ref: '#/components/schemas/RecentItemResponse'
              example: |
                <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
                <recent id="2244536342">
                  <contentItemType>stationurl</contentItemType>
                  <createdOn>2018-11-27T18:20:01.000+00:00</createdOn>
                  <lastplayedat>2025-11-01T17:32:59.000+00:00</lastplayedat>
                  <location>/v1/playback/station/s80044</location>
                  <name>Radio TEDDY</name>
                  <source id="19989313" type="Audio">
                    <createdOn>2018-08-11T08:55:41.000+00:00</createdOn>
                    <credential type="token">eyDu=</credential>
                    <name></name>
                    <sourceproviderid>25</sourceproviderid>
                    <sourcename></sourcename>
                    <sourceSettings/>
                    <updatedOn>2019-07-20T17:48:31.000+00:00</updatedOn>
                    <username></username>
                  </source>
                  <sourceid>19989313</sourceid>
                  <updatedOn>2025-11-01T17:33:00.574+00:00</updatedOn>
                </recent>
        '400':
          description: Bad request - Invalid request body or parameters
        '401':
          description: Unauthorized - Invalid or missing Bearer token
        '403':
          description: Forbidden - Valid token but insufficient permissions
        '404':
          description: Not found - Account or device not found
        '500':
          description: Internal server error

  /streaming/account/{accountId}/full:
    get:
      summary: Get full account details
      description: Retrieves complete account information including devices, presets, recents, and sources
      operationId: getFullAccount
      tags:
        - experimental
      security:
        - BearerAuth: []
      parameters:
        - name: accountId
          in: path
          required: true
          description: Account identifier
          schema:
            type: string
            example: "6921042"
      responses:
        '200':
          description: Successful response with full account details
          headers:
            Content-Type:
              schema:
                type: string
                example: application/vnd.bose.streaming-v1.2+xml
            METHOD_NAME:
              schema:
                type: string
                example: getFullAccount
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization"
            Access-Control-Expose-Headers:
              schema:
                type: string
                example: "Authorization"
          content:
            application/vnd.bose.streaming-v1.2+xml:
              schema:
                $ref: '#/components/schemas/FullAccountResponse'
        '401':
          description: Unauthorized - Invalid or missing Bearer token
        '403':
          description: Forbidden - Valid token but insufficient permissions
        '404':
          description: Not found - Account not found
        '500':
          description: Internal server error

  /oauth/device/{deviceId}/music/musicprovider/{providerId}/token/{tokenType}:
    post:
      summary: Refresh OAuth token
      description: Refreshes an OAuth token for a specific music provider
      operationId: refreshOAuthToken
      tags:
        - oauth
      security:
        - BearerAuth: []
      parameters:
        - name: deviceId
          in: path
          required: true
          description: Device identifier
          schema:
            type: string
            example: "587A628A4042"
        - name: providerId
          in: path
          required: true
          description: Music provider identifier (e.g., 15 for Spotify)
          schema:
            type: string
            example: "15"
        - name: tokenType
          in: path
          required: true
          description: Token type identifier
          schema:
            type: string
            example: "cs3"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OAuthTokenRequest'
            example:
              code: ""
              grant_type: "refresh_token"
              redirect_uri: ""
              refresh_token: "AQC-x0O-W2aVur-OIA"
      responses:
        '200':
          description: Token refreshed successfully
          headers:
            Content-Type:
              schema:
                type: string
                example: application/json
            Content-Length:
              schema:
                type: string
                example: "633"
            Connection:
              schema:
                type: string
                example: "keep-alive"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OAuthTokenResponse'
              example:
                access_token: "123fooAccessExampleToken"
                token_type: "Bearer"
                expires_in: 3600
                scope: "playlist-read-private playlist-read-collaborative streaming user-library-read user-library-modify playlist-modify-private playlist-modify-public user-read-email user-read-private user-top-read"
        '400':
          description: Bad request - Invalid request body or parameters
        '401':
          description: Unauthorized - Invalid or missing Bearer token
        '403':
          description: Forbidden - Valid token but insufficient permissions
        '404':
          description: Not found - Device or provider not found
        '500':
          description: Internal server error

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Bearer token authentication

  schemas:
    SourceProvidersResponse:
      type: object
      description: XML response containing list of source providers
      xml:
        name: sourceProviders
      properties:
        sourceprovider:
          type: array
          items:
            $ref: '#/components/schemas/SourceProvider'
          xml:
            wrapped: false

    SourceProvider:
      type: object
      description: A streaming source provider
      xml:
        name: sourceprovider
      required:
        - id
        - createdOn
        - name
        - updatedOn
      properties:
        id:
          type: integer
          description: Unique identifier for the source provider
          xml:
            attribute: true
          example: 1
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the provider was created
          example: "2012-09-19T12:43:00.000+00:00"
        name:
          type: string
          description: Name/type of the streaming source provider
          example: PANDORA
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the provider was last updated
          example: "2012-09-19T12:43:00.000+00:00"

    RecentItemRequest:
      type: object
      description: XML request body for adding a recent item
      xml:
        name: recent
      required:
        - lastplayedat
        - sourceid
        - name
        - location
        - contentItemType
      properties:
        lastplayedat:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was last played
          example: "2025-11-01T17:32:59+00:00"
        sourceid:
          type: string
          description: Identifier of the source
          example: "19989313"
        name:
          type: string
          description: Name of the content item
          example: "Radio TEDDY"
        location:
          type: string
          description: Location/path of the content item
          example: "/v1/playback/station/s80044"
        contentItemType:
          type: string
          description: Type of the content item
          example: "stationurl"

    RecentItemResponse:
      type: object
      description: XML response containing recent item details
      xml:
        name: recent
      required:
        - id
        - contentItemType
        - createdOn
        - lastplayedat
        - location
        - name
        - source
        - sourceid
        - updatedOn
      properties:
        id:
          type: string
          description: Unique identifier for the recent item
          xml:
            attribute: true
          example: "2244536335"
        contentItemType:
          type: string
          description: Type of the content item
          example: "stationurl"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was created
          example: "2018-11-27T18:20:01.000+00:00"
        lastplayedat:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was last played
          example: "2025-11-01T17:32:59.000+00:00"
        location:
          type: string
          description: Location/path of the content item
          example: "/v1/playback/station/s80044"
        name:
          type: string
          description: Name of the content item
          example: "Radio TEDDY"
        source:
          $ref: '#/components/schemas/Source'
        sourceid:
          type: string
          description: Identifier of the source
          example: "19989313"
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was last updated
          example: "2025-11-01T17:33:00.574+00:00"

    Source:
      type: object
      description: Source information for a recent item
      xml:
        name: source
      required:
        - id
        - type
        - createdOn
        - credential
        - name
        - sourceproviderid
        - sourcename
        - sourceSettings
        - updatedOn
        - username
      properties:
        id:
          type: string
          description: Unique identifier for the source
          xml:
            attribute: true
          example: "19989313"
        type:
          type: string
          description: Type of the source
          xml:
            attribute: true
          example: "Audio"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was created
          example: "2018-08-11T08:55:41.000+00:00"
        credential:
          $ref: '#/components/schemas/Credential'
        name:
          type: string
          description: Name of the source
          example: ""
        sourceproviderid:
          type: string
          description: Identifier of the source provider
          example: "25"
        sourcename:
          type: string
          description: Name of the source
          example: ""
        sourceSettings:
          type: object
          description: Source settings (empty object)
          xml:
            name: sourceSettings
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was last updated
          example: "2019-07-20T17:48:31.000+00:00"
        username:
          type: string
          description: Username associated with the source
          example: ""

    Credential:
      type: object
      description: Credential information for a source
      xml:
        name: credential
      required:
        - type
        - value
      properties:
        type:
          type: string
          description: Type of credential
          xml:
            attribute: true
          example: "token"
        value:
          type: string
          description: Credential value/token
          x-isXmlText: true
          example: "eyDu="

    DeviceSource:
      type: object
      description: Source information for device presets and recents
      xml:
        name: source
      required:
        - id
        - type
        - createdOn
        - credential
        - name
        - sourceproviderid
        - sourcename
        - sourceSettings
        - updatedOn
        - username
      properties:
        id:
          type: string
          description: Unique identifier for the source
          xml:
            attribute: true
          example: "19989313"
        type:
          type: string
          description: Type of the source
          xml:
            attribute: true
          example: "Audio"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was created
          example: "2018-08-11T08:55:41.000+00:00"
        credential:
          $ref: '#/components/schemas/Credential'
        name:
          type: string
          description: Name of the source
          example: ""
        sourceproviderid:
          type: string
          description: Identifier of the source provider
          example: "25"
        sourcename:
          type: string
          description: Name of the source
          example: ""
        sourceSettings:
          type: object
          description: Source settings (empty object)
          xml:
            name: sourceSettings
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was last updated
          example: "2019-07-20T17:48:31.000+00:00"
        username:
          type: string
          description: Username associated with the source
          example: ""

    OAuthTokenRequest:
      type: object
      description: OAuth token refresh request
      required:
        - grant_type
        - refresh_token
      properties:
        code:
          type: string
          description: Authorization code (empty for refresh token flow)
          example: ""
        grant_type:
          type: string
          description: OAuth grant type
          example: "refresh_token"
        redirect_uri:
          type: string
          description: Redirect URI (empty for refresh token flow)
          example: ""
        refresh_token:
          type: string
          description: Refresh token to exchange for new access token
          example: "AQC-x0O-W2aVur-OIA"

    OAuthTokenResponse:
      type: object
      description: OAuth token response
      required:
        - access_token
        - token_type
        - expires_in
      properties:
        access_token:
          type: string
          description: Access token for API authorization
          example: "123fooAccessExampleToken"
        token_type:
          type: string
          description: Type of the token
          example: "Bearer"
        expires_in:
          type: integer
          description: Token expiration time in seconds
          example: 3600
        scope:
          type: string
          description: Space-separated list of granted scopes
          example: "playlist-read-private playlist-read-collaborative streaming user-library-read user-library-modify playlist-modify-private playlist-modify-public user-read-email user-read-private user-top-read"

    FullAccountResponse:
      type: object
      description: XML response containing complete account information
      xml:
        name: account
      required:
        - id
        - accountStatus
        - devices
        - mode
        - preferredLanguage
        - sources
      properties:
        id:
          type: string
          description: Account identifier
          xml:
            attribute: true
          example: "6921042"
        accountStatus:
          type: string
          description: Status of the account
          example: "CHANGE_PASSWORD"
        devices:
          $ref: '#/components/schemas/DevicesContainer'
        mode:
          type: string
          description: Account mode
          example: "global"
        preferredLanguage:
          type: string
          description: Preferred language code
          example: "de"
        sources:
          $ref: '#/components/schemas/SourcesContainer'

    DevicesContainer:
      type: object
      description: Container for devices
      xml:
        name: devices
      properties:
        device:
          type: array
          items:
            $ref: '#/components/schemas/Device'
          xml:
            wrapped: false

    Device:
      type: object
      description: Device information
      xml:
        name: device
      required:
        - deviceid
        - attachedProduct
        - createdOn
        - firmwareVersion
        - ipaddress
        - name
        - presets
        - recents
        - serialNumber
        - updatedOn
      properties:
        deviceid:
          type: string
          description: Device identifier
          xml:
            attribute: true
          example: "123980WER"
        attachedProduct:
          $ref: '#/components/schemas/AttachedProduct'
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the device was created
          example: "2018-08-11T08:55:25.000+00:00"
        firmwareVersion:
          type: string
          description: Firmware version of the device
          example: "27.0.6.46330.5043500 epdbuild.trunk.hepdswbld04.2022-08-04T11:20:29"
        ipaddress:
          type: string
          description: IP address of the device
          example: "192.168.178.2"
        name:
          type: string
          description: Name of the device
          example: "Foobar"
        presets:
          $ref: '#/components/schemas/PresetsContainer'
        recents:
          $ref: '#/components/schemas/RecentsContainer'
        serialNumber:
          type: string
          description: Serial number of the device
          example: "PUP43434234"
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the device was last updated
          example: "2025-09-06T08:25:49.000+00:00"

    AttachedProduct:
      type: object
      description: Product attached to the device
      xml:
        name: attachedProduct
      required:
        - product_code
        - components
        - productlabel
        - serialnumber
      properties:
        product_code:
          type: string
          description: Product code
          xml:
            attribute: true
          example: "SoundTouch 10 sm2"
        components:
          type: object
          description: Components (empty object)
          xml:
            name: components
        productlabel:
          type: string
          description: Product label
          example: "soundtouch_10"
        serialnumber:
          type: string
          description: Serial number of the product
          example: "123SERIA1"

    PresetsContainer:
      type: object
      description: Container for presets
      xml:
        name: presets
      properties:
        preset:
          type: array
          items:
            $ref: '#/components/schemas/Preset'
          xml:
            wrapped: false

    Preset:
      type: object
      description: Preset configuration
      xml:
        name: preset
      required:
        - buttonNumber
        - containerArt
        - contentItemType
        - createdOn
        - location
        - name
        - source
        - updatedOn
        - username
      properties:
        buttonNumber:
          type: integer
          description: Button number for the preset
          xml:
            attribute: true
          example: 1
        containerArt:
          type: string
          description: URL to the container art
          example: "http://example.org/s80044q.png"
        contentItemType:
          type: string
          description: Type of content item
          example: "stationurl"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the preset was created
          example: "2018-11-26T18:40:45.000+00:00"
        location:
          type: string
          description: Location/path of the content
          example: "/v1/playback/station/s80044"
        name:
          type: string
          description: Name of the preset
          example: "Radio Foobar"
        source:
          $ref: '#/components/schemas/DeviceSource'
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the preset was last updated
          example: "2018-11-26T18:40:45.000+00:00"
        username:
          type: string
          example: "Radio Foobar"

    RecentsContainer:
      type: object
      description: Container for recent items
      xml:
        name: recents
      properties:
        recent:
          type: array
          items:
            $ref: '#/components/schemas/RecentItem'
          xml:
            wrapped: false

    RecentItem:
      type: object
      description: Recent item played on the device
      xml:
        name: recent
      required:
        - id
        - contentItemType
        - createdOn
        - lastplayedat
        - location
        - name
        - source
        - sourceid
        - updatedOn
      properties:
        id:
          type: string
          description: Unique identifier for the recent item
          xml:
            attribute: true
          example: "123"
        contentItemType:
          type: string
          description: Type of content item
          example: "tracklisturl"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was created
          example: "2025-11-09T11:40:37.000+00:00"
        lastplayedat:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was last played
          example: "2025-11-09T19:42:09.000+00:00"
        location:
          type: string
          description: Location/path of the content
          example: "/playback/container/35546f3"
        name:
          type: string
          description: Name of the recent item
          example: "A Name"
        source:
          $ref: '#/components/schemas/DeviceSource'
        sourceid:
          type: string
          description: Identifier of the source
          example: "19989643"
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the item was last updated
          example: "2025-11-09T19:42:11.000+00:00"

    SourcesContainer:
      type: object
      description: Container for sources
      xml:
        name: sources
      properties:
        source:
          type: array
          items:
            $ref: '#/components/schemas/AccountSource'
          xml:
            wrapped: false

    AccountSource:
      type: object
      description: Source information at account level
      xml:
        name: source
      required:
        - id
        - type
        - createdOn
        - credential
        - name
        - sourceproviderid
        - sourcename
        - sourceSettings
        - updatedOn
        - username
      properties:
        id:
          type: string
          description: Unique identifier for the source
          xml:
            attribute: true
          example: "19989552"
        type:
          type: string
          description: Type of the source
          xml:
            attribute: true
          example: "Audio"
        createdOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was created
          example: "2018-08-11T08:55:28.000+00:00"
        credential:
          $ref: '#/components/schemas/Credential'
        name:
          type: string
          description: Name of the source
          example: ""
        sourceproviderid:
          type: string
          description: Identifier of the source provider
          example: "2"
        sourcename:
          type: string
          description: Name of the source
          example: ""
        sourceSettings:
          type: object
          description: Source settings (empty object)
          xml:
            name: sourceSettings
        updatedOn:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the source was last updated
          example: "2018-08-11T08:55:28.000+00:00"
        username:
          type: string
          description: Username associated with the source
          example: ""
