CREATE TABLE IF NOT EXISTS DEVICE_GROUP (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ACCOUNT_ID VARCHAR(255) NOT NULL,
    MASTER_DEVICE_ID VARCHAR(255) NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    LEFT_DEVICE_ID VARCHAR(255) NOT NULL,
    RIGHT_DEVICE_ID VARCHAR(255) NOT NULL,
    CREATED_ON TIMESTAMP WITH TIME ZONE NOT NULL,
    UPDATED_ON TIMESTAMP WITH TIME ZONE NOT NULL,
    VERSION BIGINT NOT NULL DEFAULT 0,
    CONSTRAINT UQ_DEVICE_GROUP_LEFT_DEVICE
        UNIQUE (LEFT_DEVICE_ID),
    CONSTRAINT UQ_DEVICE_GROUP_RIGHT_DEVICE
        UNIQUE (RIGHT_DEVICE_ID)
);

CREATE INDEX IF NOT EXISTS IDX_DEVICE_GROUP_ACCOUNT
    ON DEVICE_GROUP(ACCOUNT_ID);

CREATE INDEX IF NOT EXISTS IDX_DEVICE_GROUP_MASTER
    ON DEVICE_GROUP(MASTER_DEVICE_ID);
